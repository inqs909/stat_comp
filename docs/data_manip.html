<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.506">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Statistical Computing - 17&nbsp; Data Manipulation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./data_summary.html" rel="next">
<link href="./importing.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./da.html">Data Manipulation, Summarization, and Graphics</a></li><li class="breadcrumb-item"><a href="./data_manip.html"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Data Manipulation</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Statistical Computing</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/inqs909/stat_comp/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Download" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download"><i class="bi bi-download"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="./Statistical-Computing.pdf">
              <i class="bi bi-bi-file-pdf pe-1"></i>
            Download PDF
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="./Statistical-Computing.epub">
              <i class="bi bi-bi-journal pe-1"></i>
            Download ePub
            </a>
          </li>
      </ul>
    </div>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R Programming</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Basic R Programming</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./control_flow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Control Flow</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./functional.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Functional Programming</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./scripting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Scripting and Piping in R</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./simulations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Simulations</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rv.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Random Variables</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Models</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./permutations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Randomizations</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./perm_hyp.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Permutation Tests</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./perm_reg.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Permutation Regression</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./mc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Monte Carlo Methods</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mc_int.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Monte Carlo Integration</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mc_testing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Monte Carlo Hypothesis Testing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mc_case_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Monte Carlo Methods Case Study 1</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mc_case_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Monte Carlo Methods Case Study 2</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mc_case_3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Monte Carlo Methods Case Study 3</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./bootstrapping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bootstrapping</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./parametric.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Parametric Bootrapping</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./nonparametric.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Nonparametric Boostrapping</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./da.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Manipulation, Summarization, and Graphics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./importing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Importing Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data_manip.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Data Manipulation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data_summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Data Summarization</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./plot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Graphics</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./reporting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Reporting Data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./document.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Quarto Documents</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./presentations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Presentations</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./efficient.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Debugging and Efficient Porgramming</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./debugging.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Debugging Code</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./profiling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Efficient Programming and Profiling</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vectorizing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Vectorizing Code</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rcpp.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Introduction to Rcpp</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">17.1</span> Introduction</a>
  <ul class="collapse">
  <li><a href="#notes" id="toc-notes" class="nav-link" data-scroll-target="#notes"><span class="header-section-number">17.1.1</span> Notes</a></li>
  </ul></li>
  <li><a href="#tidyverse" id="toc-tidyverse" class="nav-link" data-scroll-target="#tidyverse"><span class="header-section-number">17.2</span> Tidyverse</a></li>
  <li><a href="#loading-data" id="toc-loading-data" class="nav-link" data-scroll-target="#loading-data"><span class="header-section-number">17.3</span> Loading Data</a>
  <ul class="collapse">
  <li><a href="#csv-files" id="toc-csv-files" class="nav-link" data-scroll-target="#csv-files"><span class="header-section-number">17.3.1</span> CSV Files</a></li>
  <li><a href="#for-this-chapter" id="toc-for-this-chapter" class="nav-link" data-scroll-target="#for-this-chapter"><span class="header-section-number">17.3.2</span> For This Chapter</a></li>
  </ul></li>
  <li><a href="#the-pipe-operator" id="toc-the-pipe-operator" class="nav-link" data-scroll-target="#the-pipe-operator"><span class="header-section-number">17.4</span> The Pipe Operator <code>%&gt;%</code></a></li>
  <li><a href="#data-transformation" id="toc-data-transformation" class="nav-link" data-scroll-target="#data-transformation"><span class="header-section-number">17.5</span> Data Transformation</a>
  <ul class="collapse">
  <li><a href="#summarizing-data" id="toc-summarizing-data" class="nav-link" data-scroll-target="#summarizing-data"><span class="header-section-number">17.5.1</span> Summarizing Data</a></li>
  <li><a href="#grouping" id="toc-grouping" class="nav-link" data-scroll-target="#grouping"><span class="header-section-number">17.5.2</span> Grouping</a></li>
  <li><a href="#subsets" id="toc-subsets" class="nav-link" data-scroll-target="#subsets"><span class="header-section-number">17.5.3</span> Subsets</a></li>
  <li><a href="#creating-variables" id="toc-creating-variables" class="nav-link" data-scroll-target="#creating-variables"><span class="header-section-number">17.5.4</span> Creating Variables</a></li>
  <li><a href="#merging-datasets" id="toc-merging-datasets" class="nav-link" data-scroll-target="#merging-datasets"><span class="header-section-number">17.5.5</span> Merging Datasets</a></li>
  </ul></li>
  <li><a href="#reshaping-data" id="toc-reshaping-data" class="nav-link" data-scroll-target="#reshaping-data"><span class="header-section-number">17.6</span> Reshaping Data</a>
  <ul class="collapse">
  <li><a href="#wide-to-long-data" id="toc-wide-to-long-data" class="nav-link" data-scroll-target="#wide-to-long-data"><span class="header-section-number">17.6.1</span> Wide to Long Data</a></li>
  <li><a href="#long-to-wide" id="toc-long-to-wide" class="nav-link" data-scroll-target="#long-to-wide"><span class="header-section-number">17.6.2</span> Long to Wide</a></li>
  <li><a href="#spliting-variables" id="toc-spliting-variables" class="nav-link" data-scroll-target="#spliting-variables"><span class="header-section-number">17.6.3</span> Spliting Variables</a></li>
  <li><a href="#splitting-rows" id="toc-splitting-rows" class="nav-link" data-scroll-target="#splitting-rows"><span class="header-section-number">17.6.4</span> Splitting Rows</a></li>
  <li><a href="#merging-rows" id="toc-merging-rows" class="nav-link" data-scroll-target="#merging-rows"><span class="header-section-number">17.6.5</span> Merging Rows</a></li>
  </ul></li>
  <li><a href="#applied-example" id="toc-applied-example" class="nav-link" data-scroll-target="#applied-example"><span class="header-section-number">17.7</span> Applied Example</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./da.html">Data Manipulation, Summarization, and Graphics</a></li><li class="breadcrumb-item"><a href="./data_manip.html"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Data Manipulation</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Data Manipulation</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="introduction" class="level2" data-number="17.1">
<h2 data-number="17.1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">17.1</span> Introduction</h2>
<p>Data manipulation consists of transforming a data set to be analyzed. Certain statistical methods require data sets to be formatted in a certain way before you can apply a certain function<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. Other times, you will need to transform the data set to present to stakeholder. Therefore, being able to transform a data set is essential.</p>
<section id="notes" class="level3" data-number="17.1.1">
<h3 data-number="17.1.1" class="anchored" data-anchor-id="notes"><span class="header-section-number">17.1.1</span> Notes</h3>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warnings Suppressed
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>In order to keep the page concise, the warning messages have been suppressed. These warnings were produced because functions were applied to incorrect inputs, ie <span class="math inline">\(\sqrt{A}\)</span>. Therefore, you may see <code>NA</code> as the output. There is nothing wrong with the code, it is just that the input was not valid, but R still completed the task.</p>
</div>
</div>
</div>
</section>
</section>
<section id="tidyverse" class="level2" data-number="17.2">
<h2 data-number="17.2" class="anchored" data-anchor-id="tidyverse"><span class="header-section-number">17.2</span> Tidyverse</h2>
<p>Tidyverse is a set of packages that make data manipulation much easier. These are functions that many individuals from the R community find useful to use for data analysis. In my opinion, once you have understand how Tidyverse packages function, it makes it much easier to work with than Base R. Many of the functions are descriptively named for easy remembrance. For the most part, you can do almost everything that Base R can do. There are just a few things you can’t do, but it is rare that you will use them. One last thing is that the output from tidyverse is always formatted as a tibble class, the Tidyverse version of the data frame. This can have some ups and downs. However, think of a tibble as a lazier data frame. If you haven’t done so, install tidyverse:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tidyverse"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then load tidyverse into R:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This will load the main Tidyverse packages: <code>ggplot2::</code>, <code>tibble::</code>, <code>tidyr::</code>, <code>readr::</code>, <code>purr::</code>, <code>dplyr::</code>, <code>stringr::</code>, and <code>forcats::</code>.</p>
</section>
<section id="loading-data" class="level2" data-number="17.3">
<h2 data-number="17.3" class="anchored" data-anchor-id="loading-data"><span class="header-section-number">17.3</span> Loading Data</h2>
<p>There are three methods to load a data set in R: using base R, using Tidyverse, or using RStudio. While it is important to understand how the code works to load a data set, I recommend using RStudio to import the data. It does all the work for you. Additionally, if you decide to use Tidyverse packages, RStudio will provide corresponding code for a particular file.</p>
<p>To import a data set using RStudio, head over to the environment tab (usually in the upper right hand pane) and click on the Import Dataset button. A pop-up window should look something like below.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="img/import.png" class="img-fluid figure-img" style="width:50.0%"></p>
</figure>
</div>
</div>
</div>
<p>Notice how there are several options to load a data set. Depending on the format, you may want to choose one of those options. Next, notice how there are 2 “From Text”. This is because it will load text data using either Base R packages or the <code>readr::</code> package from tidyverse. Either works, but the <code>readr::</code> package provides the necessary code to load the data set in the window. The other one provides the code in the console.</p>
<section id="csv-files" class="level3" data-number="17.3.1">
<h3 data-number="17.3.1" class="anchored" data-anchor-id="csv-files"><span class="header-section-number">17.3.1</span> CSV Files</h3>
<p>A CSV file is a type of text file that where the values are separated from commas. It is very common file that you will work with. Here I will provide the code necessary to import a CSV file using either Base R or <code>readr::</code> code.</p>
<section id="base-r" class="level4" data-number="17.3.1.1">
<h4 data-number="17.3.1.1" class="anchored" data-anchor-id="base-r"><span class="header-section-number">17.3.1.1</span> Base R</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read.csv</span>(<span class="st">"FILE_NAME_AND_LOCATION"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="readr" class="level4" data-number="17.3.1.2">
<h4 data-number="17.3.1.2" class="anchored" data-anchor-id="readr"><span class="header-section-number">17.3.1.2</span> <code>readr::</code></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="st">"FILE_NAME_AND_LOCATION"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Notice that the functions are virtually the same.</p>
</section>
</section>
<section id="for-this-chapter" class="level3" data-number="17.3.2">
<h3 data-number="17.3.2" class="anchored" data-anchor-id="for-this-chapter"><span class="header-section-number">17.3.2</span> For This Chapter</h3>
<p>You will need to download and extract this zip <a href="https://www.inqs.info/stat_comp/files/data.zip">file</a> to conduct the analysis in the chapter. The code below will load the data sets you need:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>data1 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/data_3_1.csv"</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>data2 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/data_3_2.csv"</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>data3 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/data_3_3.csv"</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>data4 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/data_3_6.csv"</span>)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>data5 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/data_3_7.csv"</span>)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>data6 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/data_3_5.csv"</span>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>data7 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/data_3_4.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Make sure to change the file location as needed.</p>
</section>
</section>
<section id="the-pipe-operator" class="level2" data-number="17.4">
<h2 data-number="17.4" class="anchored" data-anchor-id="the-pipe-operator"><span class="header-section-number">17.4</span> The Pipe Operator <code>%&gt;%</code></h2>
<p>The main benefit of the pipe operator is to make the code easier to read. The pipe operator is from the <code>magrittr::</code>. It is usually loaded when you load the <code>tidyverse::</code>. What the pipe operator, <code>%&gt;%</code>, does is that it will take the output from a previous function and it will use it as the input for the next function. This prevents us from nesting functions together and overwhelm us with numerous parentheses and commas. To practice, pipe <code>data</code> into the <code>glimpse()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>data1 <span class="sc">%&gt;%</span> <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,000
Columns: 10
$ ID1  &lt;chr&gt; "A2b6115fd", "Ac51c9cf1", "A7534d3a0", "A73fc5642", "Ae020e4bd", …
$ cat1 &lt;chr&gt; "A", "A", "A", "A", "C", "A", "A", "C", "B", "C", "B", "B", "A", …
$ cat2 &lt;chr&gt; "E", "D", "F", "F", "E", "D", "E", "F", "E", "E", "F", "E", "E", …
$ var1 &lt;dbl&gt; 1.1541672, -0.3667030, -0.4203357, -2.0006336, 0.6970417, 0.46690…
$ var2 &lt;dbl&gt; 4, 3, 6, 5, 3, 4, 5, 0, 5, 3, 3, 8, 4, 5, 2, 5, 7, 7, 5, 1, 4, 3,…
$ var3 &lt;dbl&gt; 2.87981553, 0.06397162, -1.04021753, -0.31355281, 0.52613439, 2.4…
$ var4 &lt;dbl&gt; 3.53845785, 1.07279559, 0.22632480, 0.02128418, 2.97936180, 1.853…
$ var5 &lt;dbl&gt; -3.1827969, -3.1827969, -3.1827969, -3.1827969, 6.0601967, -3.182…
$ var6 &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ var7 &lt;dbl&gt; 1, 0, 0, 0, 0, 0, 1, 1, 0, 1, 0, 1, 0, 1, 1, 0, 1, 0, 1, 0, 1, 1,…</code></pre>
</div>
</div>
<p>The <code>glimpse()</code> provides basic variable information about <code>data1</code>. I recommend practice reading the code in plain English to help you understand how these functions.</p>
</section>
<section id="data-transformation" class="level2" data-number="17.5">
<h2 data-number="17.5" class="anchored" data-anchor-id="data-transformation"><span class="header-section-number">17.5</span> Data Transformation</h2>
<p>This section focuses on manipulating the data to obtain basic statistics, such as obtaining the mean for different categories. Many of the functions used here are from the <code>dplyr::</code>.</p>
<section id="summarizing-data" class="level3" data-number="17.5.1">
<h3 data-number="17.5.1" class="anchored" data-anchor-id="summarizing-data"><span class="header-section-number">17.5.1</span> Summarizing Data</h3>
<p>Summarizing Data is one of the most important thing in statistics. First, let’s get the mean for all the variables in <code>data1</code>. This is done by using the <code>summarize_all()</code>. All you need to do is provide the function you want R to provide. Pipe <code>data1</code> into the <code>summarize_all()</code> and specify <code>mean</code> in the function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>data1 <span class="sc">%&gt;%</span> <span class="fu">summarise_all</span>(mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 10
    ID1  cat1  cat2    var1  var2  var3  var4  var5  var6  var7
  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1    NA    NA    NA -0.0335  4.94 0.936  1.96 0.774     0 0.394</code></pre>
</div>
</div>
<p>Notice how some values are <code>NA</code>, this is because the variables are character data types. Therefore, it will not be able to compute the mean. Now find the standard deviation for the data set.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>data1 <span class="sc">%&gt;%</span> <span class="fu">summarise_all</span>(sd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 10
    ID1  cat1  cat2  var1  var2  var3  var4  var5  var6  var7
  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1    NA    NA    NA  1.00  2.22  1.02  1.00  3.93     0 0.489</code></pre>
</div>
</div>
<p>Now lets create a frequency table for the <code>cat1</code> variable in <code>data1</code>. use the <code>count()</code> and specify the variable you are interested in:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>data1 <span class="sc">%&gt;%</span> <span class="fu">count</span>(cat1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  cat1      n
  &lt;chr&gt; &lt;int&gt;
1 A       332
2 B       328
3 C       340</code></pre>
</div>
</div>
<p>Now, repeat for <code>cat2</code> in <code>data1</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>data1 <span class="sc">%&gt;%</span> <span class="fu">count</span>(cat2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  cat2      n
  &lt;chr&gt; &lt;int&gt;
1 D       322
2 E       337
3 F       341</code></pre>
</div>
</div>
</section>
<section id="grouping" class="level3" data-number="17.5.2">
<h3 data-number="17.5.2" class="anchored" data-anchor-id="grouping"><span class="header-section-number">17.5.2</span> Grouping</h3>
<p>Summarizing data is great, but sometimes you may want to group data and obtain summary statistics for those groups. This is done by using the <code>group_by()</code> and specify which variable you want to group. Try grouping <code>data1</code> by <code>cat1</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>data1 <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(cat1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,000 × 10
# Groups:   cat1 [3]
   ID1       cat1  cat2    var1  var2    var3   var4   var5  var6  var7
   &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 A2b6115fd A     E      1.15      4  2.88   3.54   -3.18      0     1
 2 Ac51c9cf1 A     D     -0.367     3  0.0640 1.07   -3.18      0     0
 3 A7534d3a0 A     F     -0.420     6 -1.04   0.226  -3.18      0     0
 4 A73fc5642 A     F     -2.00      5 -0.314  0.0213 -3.18      0     0
 5 Ae020e4bd C     E      0.697     3  0.526  2.98    6.06      0     0
 6 Ac0d3b0fe A     D      0.467     4  2.45   1.85   -3.18      0     0
 7 A2edfed41 A     E      1.36      5  0.514  0.529  -3.18      0     1
 8 Ad38a4bbe C     F      0.369     0  1.98   2.36    6.06      0     1
 9 A5ee0f97f B     E      1.80      5  0.147  2.22   -0.701     0     0
10 Ad791c03d C     E      1.25      3 -1.05   0.0289  6.06      0     1
# … with 990 more rows</code></pre>
</div>
</div>
<p>Great! You now have grouped data; however, this is not helpful. We can use this output and summarize the groups. All we need to do is pipe the output to the <code>summarise_all()</code>. Group <code>data1</code> by <code>cat1</code> and find the mean:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>data1 <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(cat1) <span class="sc">%&gt;%</span> <span class="fu">summarise_all</span>(mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 10
  cat1    ID1  cat2    var1  var2  var3  var4   var5  var6  var7
  &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A        NA    NA -0.0369  4.79 0.877  1.97 -3.18      0 0.401
2 B        NA    NA -0.0345  4.98 1.01   1.97 -0.701     0 0.390
3 C        NA    NA -0.0292  5.05 0.922  1.94  6.06      0 0.391</code></pre>
</div>
</div>
<p>If we want to group by two variables, all we need to do is specify both variables in the <code>group_by()</code>. Group <code>data1</code> by <code>cat1</code> and <code>cat2</code> then find the mean:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>data1 <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(cat1,cat2) <span class="sc">%&gt;%</span> <span class="fu">summarise_all</span>(mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 10
# Groups:   cat1 [3]
  cat1  cat2    ID1      var1  var2  var3  var4   var5  var6  var7
  &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A     D        NA -0.0186    4.87 0.858  1.93 -3.18      0 0.374
2 A     E        NA -0.0265    4.70 0.882  1.94 -3.18      0 0.393
3 A     F        NA -0.0661    4.79 0.890  2.03 -3.18      0 0.436
4 B     D        NA -0.152     5.21 1.01   1.96 -0.701     0 0.333
5 B     E        NA  0.0890    5.04 1.04   1.94 -0.701     0 0.417
6 B     F        NA -0.0659    4.72 0.979  2.03 -0.701     0 0.411
7 C     D        NA -0.160     5.01 0.927  1.87  6.06      0 0.378
8 C     E        NA -0.000228  5.07 0.910  2.00  6.06      0 0.345
9 C     F        NA  0.0662    5.07 0.930  1.94  6.06      0 0.445</code></pre>
</div>
</div>
<p>Now, instead of finding the mean for all variables in a data set, we are only interested in viewing <code>var1</code>. We can use the <code>summarise()</code> and type the R code for finding the mean for the particular variable. Group <code>data1</code> by <code>cat1</code> and find the mean for <code>var1</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>data1 <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(cat1) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="fu">mean</span>(var1))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  cat1  `mean(var1)`
  &lt;chr&gt;        &lt;dbl&gt;
1 A          -0.0369
2 B          -0.0345
3 C          -0.0292</code></pre>
</div>
</div>
</section>
<section id="subsets" class="level3" data-number="17.5.3">
<h3 data-number="17.5.3" class="anchored" data-anchor-id="subsets"><span class="header-section-number">17.5.3</span> Subsets</h3>
<p>On occasion, you may need to create a subset of your data. You may only want to work with one part of your data. To create a subset of your data, use the <code>filter()</code> to create the subset. This will select the rows that satisfy a certain condition. Create a subset of <code>data1</code> where only the positive values of <code>var1</code> are present. Use the <code>filter()</code> and state <code>var1&gt;0</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>data1 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(var1<span class="sc">&gt;</span><span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 484 × 10
   ID1       cat1  cat2   var1  var2    var3   var4   var5  var6  var7
   &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 A2b6115fd A     E     1.15      4  2.88   3.54   -3.18      0     1
 2 Ae020e4bd C     E     0.697     3  0.526  2.98    6.06      0     0
 3 Ac0d3b0fe A     D     0.467     4  2.45   1.85   -3.18      0     0
 4 A2edfed41 A     E     1.36      5  0.514  0.529  -3.18      0     1
 5 Ad38a4bbe C     F     0.369     0  1.98   2.36    6.06      0     1
 6 A5ee0f97f B     E     1.80      5  0.147  2.22   -0.701     0     0
 7 Ad791c03d C     E     1.25      3 -1.05   0.0289  6.06      0     1
 8 Af88d3ab5 B     E     2.10      8  3.07   3.29   -0.701     0     1
 9 A429b65a6 A     E     1.46      4  0.0638 2.36   -3.18      0     0
10 A3638155a A     F     0.429     5  1.76   1.55   -3.18      0     1
# … with 474 more rows</code></pre>
</div>
</div>
<p>If you know which rows you want, you can use the <code>slice()</code> and specify the rows as a vector. Create a subset of <code>data1</code> and select the rows 100 to 200 and 300 to 400.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>data1 <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="fu">c</span>(<span class="dv">100</span><span class="sc">:</span><span class="dv">200</span>, <span class="dv">300</span><span class="sc">:</span><span class="dv">400</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 202 × 10
   ID1       cat1  cat2    var1  var2   var3    var4   var5  var6  var7
   &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 A568e9a48 A     E      1.88      6  2.59  4.02    -3.18      0     1
 2 Aa77dca83 B     D      1.32      5  0.889 3.12    -0.701     0     1
 3 A901d56c2 C     F     -0.406     6  0.496 3.67     6.06      0     0
 4 Ad66ce513 A     D      1.04      2  0.331 0.00523 -3.18      0     0
 5 A897a230d B     E     -0.616     9  1.61  3.08    -0.701     0     0
 6 Afbc693a4 B     F     -0.404     7 -0.604 0.149   -0.701     0     1
 7 Ae7269323 C     F     -0.176     4  1.06  2.26     6.06      0     0
 8 A182729af A     D      1.11      7 -0.297 1.45    -3.18      0     1
 9 A1a06950b C     E     -1.29      5  1.78  3.07     6.06      0     1
10 A569c9d81 A     F      1.28      6  0.683 1.53    -3.18      0     0
# … with 192 more rows</code></pre>
</div>
</div>
<p>If you need random sample of your <code>data1</code>, use the <code>sample_n()</code> and specify the number you want. It will create a data set of randomly selected rows. Create a random sample of <code>data1</code> of 100 rows.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>data1 <span class="sc">%&gt;%</span>  <span class="fu">sample_n</span>(<span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 100 × 10
   ID1       cat1  cat2    var1  var2     var3    var4   var5  var6  var7
   &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Aeb2d0efe A     D     -0.210     1  1.30     3.06   -3.18      0     0
 2 C4faa2778 A     F      1.86      3  2.67     2.81   -3.18      0     1
 3 Bfbd5ae18 A     E     -0.309     7  1.23     0.890  -3.18      0     0
 4 D79551007 C     F     -0.662     7  0.177    0.0659  6.06      0     1
 5 B9356e5e6 B     E     -0.133     7  1.52     2.27   -0.701     0     1
 6 C20105baf A     D      0.501     4  1.72     2.58   -3.18      0     1
 7 Cbef686a5 C     E      0.633     3  0.687    2.76    6.06      0     0
 8 B96e34b9e A     E      1.34      4 -0.00273 -0.205  -3.18      0     0
 9 B8881659d A     D     -0.401     6  1.47     3.21   -3.18      0     0
10 D895472ca B     D     -1.38      7  0.710    1.36   -0.701     0     0
# … with 90 more rows</code></pre>
</div>
</div>
<p>If you want a random sample that is proportion of your original data size, use the <code>sample_frac()</code>. Specify the proportion that you want from the data. Create a random sample of <code>data1</code> that is only 2/7th of the original size.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>data1 <span class="sc">%&gt;%</span> <span class="fu">sample_frac</span>(<span class="dv">2</span><span class="sc">/</span><span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 286 × 10
   ID1       cat1  cat2    var1  var2   var3   var4   var5  var6  var7
   &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Bd6103fdb C     E      1.14      4 -0.468 0.0377  6.06      0     0
 2 Be1e7585e A     E     -1.45      1  0.501 1.91   -3.18      0     1
 3 Df6d785e6 A     E     -1.28      4  1.12  1.95   -3.18      0     1
 4 A89eb02a1 A     F      1.78      8  0.967 2.42   -3.18      0     1
 5 C41500f79 B     D      0.306     6 -0.552 0.452  -0.701     0     1
 6 Bd0c4853c C     E      0.206     8  0.631 2.68    6.06      0     1
 7 Bd0c710df A     D      0.341     1  0.628 1.73   -3.18      0     0
 8 Cf6d785e6 C     E     -0.640    12 -0.411 0.697   6.06      0     0
 9 D8e80383c C     F      0.286     5  1.13  1.02    6.06      0     1
10 Da20de630 B     D      0.393     4  2.27  1.99   -0.701     0     0
# … with 276 more rows</code></pre>
</div>
</div>
</section>
<section id="creating-variables" class="level3" data-number="17.5.4">
<h3 data-number="17.5.4" class="anchored" data-anchor-id="creating-variables"><span class="header-section-number">17.5.4</span> Creating Variables</h3>
<p>Some times you may need to transform variables to a new variable. This can be done by using the <code>mutate()</code> where you specify the name of the new variable and set equal to the transformation of other variables. Using the <code>data2</code> data set, create a new variable called <code>logvar1</code> and set that to the log of <code>va1</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>data2 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">logvar1 =</span> <span class="fu">log</span>(va1))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,000 × 6
   ID1       ID_1     ID_2      va1    va2 logvar1
   &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1 A2b6115fd 2b6115fd A     0.458   81.4    -0.782
 2 Ac51c9cf1 c51c9cf1 A     0.236   -1.15   -1.44 
 3 A7534d3a0 7534d3a0 A     0.254    1.16   -1.37 
 4 A73fc5642 73fc5642 A     0.0411  -1.21   -3.19 
 5 Ae020e4bd e020e4bd A     0.266   -2.31   -1.32 
 6 Ac0d3b0fe c0d3b0fe A     0.00992 -0.882  -4.61 
 7 A2edfed41 2edfed41 A     0.293   -0.375  -1.23 
 8 Ad38a4bbe d38a4bbe A     0.261   -1.09   -1.34 
 9 A5ee0f97f 5ee0f97f A     0.186   -6.14   -1.68 
10 Ad791c03d d791c03d A     0.0368  -0.258  -3.30 
# … with 990 more rows</code></pre>
</div>
</div>
<p>The <code>mutate()</code> allows you to create multiple new variables at once. Id addition to <code>logvar1</code>, create a new variable called <code>sqrtvar2</code> and set that equal to the square root of <code>va2</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>data2 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">logvar1 =</span> <span class="fu">log</span>(va1), <span class="at">sqrtvar2 =</span> <span class="fu">sqrt</span>(va2))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,000 × 7
   ID1       ID_1     ID_2      va1    va2 logvar1 sqrtvar2
   &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;
 1 A2b6115fd 2b6115fd A     0.458   81.4    -0.782     9.02
 2 Ac51c9cf1 c51c9cf1 A     0.236   -1.15   -1.44    NaN   
 3 A7534d3a0 7534d3a0 A     0.254    1.16   -1.37      1.08
 4 A73fc5642 73fc5642 A     0.0411  -1.21   -3.19    NaN   
 5 Ae020e4bd e020e4bd A     0.266   -2.31   -1.32    NaN   
 6 Ac0d3b0fe c0d3b0fe A     0.00992 -0.882  -4.61    NaN   
 7 A2edfed41 2edfed41 A     0.293   -0.375  -1.23    NaN   
 8 Ad38a4bbe d38a4bbe A     0.261   -1.09   -1.34    NaN   
 9 A5ee0f97f 5ee0f97f A     0.186   -6.14   -1.68    NaN   
10 Ad791c03d d791c03d A     0.0368  -0.258  -3.30    NaN   
# … with 990 more rows</code></pre>
</div>
</div>
<p>If you want to create categorical variables, use the <code>mutate()</code> and the <code>if_else()</code>. The <code>if_else()</code> requires three arguments: <code>condition=</code>, <code>true=</code>, and <code>false=</code>. The first argument requires a condition that will return a logical value. If true, then R will assign what is stated in the <code>true=</code>, otherwise R will assign what is in the <code>false=</code>. To begin, find the median of <code>va1</code> from <code>data2</code> and assign it to <code>medval</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>medval <span class="ot">&lt;-</span> data2<span class="sc">$</span>va1 <span class="sc">%&gt;%</span> <span class="fu">median</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>No create a new variable called <code>diva1</code> where if <code>va1</code> is greater than the median of <code>va1</code>, assign it “A”, otherwise assign it “B”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>data2 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">diva1=</span><span class="fu">if_else</span>(va1<span class="sc">&gt;</span>medval,<span class="st">"A"</span>,<span class="st">"B"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,000 × 6
   ID1       ID_1     ID_2      va1    va2 diva1
   &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;
 1 A2b6115fd 2b6115fd A     0.458   81.4   A    
 2 Ac51c9cf1 c51c9cf1 A     0.236   -1.15  B    
 3 A7534d3a0 7534d3a0 A     0.254    1.16  B    
 4 A73fc5642 73fc5642 A     0.0411  -1.21  B    
 5 Ae020e4bd e020e4bd A     0.266   -2.31  B    
 6 Ac0d3b0fe c0d3b0fe A     0.00992 -0.882 B    
 7 A2edfed41 2edfed41 A     0.293   -0.375 A    
 8 Ad38a4bbe d38a4bbe A     0.261   -1.09  B    
 9 A5ee0f97f 5ee0f97f A     0.186   -6.14  B    
10 Ad791c03d d791c03d A     0.0368  -0.258 B    
# … with 990 more rows</code></pre>
</div>
</div>
</section>
<section id="merging-datasets" class="level3" data-number="17.5.5">
<h3 data-number="17.5.5" class="anchored" data-anchor-id="merging-datasets"><span class="header-section-number">17.5.5</span> Merging Datasets</h3>
<p>One of the last thing is to go over how to merge data sets together. To merge the data sets, we use the <code>full_join()</code>. The <code>full_join()</code> needs two data sets (separated by commas) and the <code>by=</code> which provides the variables needed (must be the same name for each data set) to merge the data sets. Merge <code>data1</code> and <code>data2</code> with the variable <code>ID1</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">full_join</span>(data1, data2, <span class="at">by =</span> <span class="st">"ID1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,000 × 14
   ID1    cat1  cat2    var1  var2    var3   var4   var5  var6  var7 ID_1  ID_2 
   &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
 1 A2b61… A     E      1.15      4  2.88   3.54   -3.18      0     1 2b61… A    
 2 Ac51c… A     D     -0.367     3  0.0640 1.07   -3.18      0     0 c51c… A    
 3 A7534… A     F     -0.420     6 -1.04   0.226  -3.18      0     0 7534… A    
 4 A73fc… A     F     -2.00      5 -0.314  0.0213 -3.18      0     0 73fc… A    
 5 Ae020… C     E      0.697     3  0.526  2.98    6.06      0     0 e020… A    
 6 Ac0d3… A     D      0.467     4  2.45   1.85   -3.18      0     0 c0d3… A    
 7 A2edf… A     E      1.36      5  0.514  0.529  -3.18      0     1 2edf… A    
 8 Ad38a… C     F      0.369     0  1.98   2.36    6.06      0     1 d38a… A    
 9 A5ee0… B     E      1.80      5  0.147  2.22   -0.701     0     0 5ee0… A    
10 Ad791… C     E      1.25      3 -1.05   0.0289  6.06      0     1 d791… A    
# … with 990 more rows, and 2 more variables: va1 &lt;dbl&gt;, va2 &lt;dbl&gt;</code></pre>
</div>
</div>
<p>The <code>full_join()</code> allows you to merge data sets using two variables instead of one. All you need to do is specify <code>by=</code> with a vector specifying the arguments. Merge <code>data2</code> and <code>data3</code> by <code>ID_1</code> and <code>ID_2</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">full_join</span>(data2, data3, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"ID_1"</span>,<span class="st">"ID_2"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,000 × 8
   ID1.x     ID_1     ID_2      va1    va2 ID1.y         v1     v2
   &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt;  &lt;dbl&gt;
 1 A2b6115fd 2b6115fd A     0.458   81.4   A2b6115fd 0.361  0.278 
 2 Ac51c9cf1 c51c9cf1 A     0.236   -1.15  Ac51c9cf1 0.273  2.64  
 3 A7534d3a0 7534d3a0 A     0.254    1.16  A7534d3a0 1.17   0.119 
 4 A73fc5642 73fc5642 A     0.0411  -1.21  A73fc5642 0.879  0.705 
 5 Ae020e4bd e020e4bd A     0.266   -2.31  Ae020e4bd 0.0268 0.297 
 6 Ac0d3b0fe c0d3b0fe A     0.00992 -0.882 Ac0d3b0fe 1.18   3.16  
 7 A2edfed41 2edfed41 A     0.293   -0.375 A2edfed41 0.356  0.174 
 8 Ad38a4bbe d38a4bbe A     0.261   -1.09  Ad38a4bbe 0.430  0.130 
 9 A5ee0f97f 5ee0f97f A     0.186   -6.14  A5ee0f97f 0.643  0.0231
10 Ad791c03d d791c03d A     0.0368  -0.258 Ad791c03d 0.183  0.311 
# … with 990 more rows</code></pre>
</div>
</div>
</section>
</section>
<section id="reshaping-data" class="level2" data-number="17.6">
<h2 data-number="17.6" class="anchored" data-anchor-id="reshaping-data"><span class="header-section-number">17.6</span> Reshaping Data</h2>
<p>This section focuses on reshaping the data to prepare it for analysis. For example, to conduct longitudinal data analysis, you will need to have long data. Reshaping data may be with converting data from wide to long, converting back from long to wide, splitting variables, splitting rows and merging variable. The functions used in this lesson are from the <code>tidy::</code></p>
<section id="wide-to-long-data" class="level3" data-number="17.6.1">
<h3 data-number="17.6.1" class="anchored" data-anchor-id="wide-to-long-data"><span class="header-section-number">17.6.1</span> Wide to Long Data</h3>
<p>Converting data from wide to long is necessary when the data looks like <code>data4</code>, view <code>data4</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>data4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,000 × 5
   ID1           X1     X2    X3    X4
   &lt;chr&gt;      &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Ad9131ee9  0.800  4.68   1.46  5.35
 2 A9c5988ea  1.17   1.50   4.83  3.75
 3 A28a5479d  1.85   2.64   2.39  4.34
 4 Aaf5537cc  1.55   2.28   3.35  3.76
 5 A370958bd -1.36   2.48   2.06  4.70
 6 Aea997e13  2.37   3.27   3.11  3.31
 7 A3563646f  2.10  -0.902  2.49  2.75
 8 A9b3cfdba -0.513  0.271  2.97  2.97
 9 A32b6737a  1.28   2.02   3.48  4.87
10 A30e96748  1.30   1.72   2.11  2.04
# … with 990 more rows</code></pre>
</div>
</div>
<p>Let’s say <code>data4</code> represents biomarker data. Variable <code>ID1</code> represents a unique identifier for the participant. Then <code>X1</code>, <code>X2</code>, <code>X3</code>, and <code>X4</code> represents a value collected for a participant at different time point. This is know as repeated measurements. This data is considered wide because the repeated measurements are on the same row. To make it long, the repeated measurements must be on the same column.</p>
<p>To convert data from long to wide, we will use the <code>pivot_longer()</code> with the first argument taking variables of the repeated measurements, <code>c(X1:X4)</code> or <code>X1:X4</code>, the second argument asks for the name for the variable that contains the stored repeated measurements, the variable names, and the last variable asks for the name for all the values, the data collected. Convert the <code>data4</code> to long and name the variable names column <code>"measurement"</code>, and values column <code>"value"</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>data4 <span class="sc">%&gt;%</span> <span class="fu">pivot_longer</span>(X1<span class="sc">:</span>X4, <span class="st">"measurement"</span>, <span class="st">"value"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4,000 × 3
   ID1       measurement value
   &lt;chr&gt;     &lt;chr&gt;       &lt;dbl&gt;
 1 Ad9131ee9 X1          0.800
 2 Ad9131ee9 X2          4.68 
 3 Ad9131ee9 X3          1.46 
 4 Ad9131ee9 X4          5.35 
 5 A9c5988ea X1          1.17 
 6 A9c5988ea X2          1.50 
 7 A9c5988ea X3          4.83 
 8 A9c5988ea X4          3.75 
 9 A28a5479d X1          1.85 
10 A28a5479d X2          2.64 
# … with 3,990 more rows</code></pre>
</div>
</div>
</section>
<section id="long-to-wide" class="level3" data-number="17.6.2">
<h3 data-number="17.6.2" class="anchored" data-anchor-id="long-to-wide"><span class="header-section-number">17.6.2</span> Long to Wide</h3>
<p>If you need to convert data from long to wide, use the <code>pivot_wider()</code>. You will need to specify the <code>names_from=</code> which specifies the variable names for the wide data set, and you will need to specify the <code>values_from=</code> that specifies variable that contains the values in the long data set. Convert <code>data5</code> from long to wide data. Note, you must specify the arguments for this function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>data5 <span class="sc">%&gt;%</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> measurement, </span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">values_from =</span> value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,000 × 5
   ID1           X1     X2    X3    X4
   &lt;chr&gt;      &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Ad9131ee9  0.800  4.68   1.46  5.35
 2 A9c5988ea  1.17   1.50   4.83  3.75
 3 A28a5479d  1.85   2.64   2.39  4.34
 4 Aaf5537cc  1.55   2.28   3.35  3.76
 5 A370958bd -1.36   2.48   2.06  4.70
 6 Aea997e13  2.37   3.27   3.11  3.31
 7 A3563646f  2.10  -0.902  2.49  2.75
 8 A9b3cfdba -0.513  0.271  2.97  2.97
 9 A32b6737a  1.28   2.02   3.48  4.87
10 A30e96748  1.30   1.72   2.11  2.04
# … with 990 more rows</code></pre>
</div>
</div>
</section>
<section id="spliting-variables" class="level3" data-number="17.6.3">
<h3 data-number="17.6.3" class="anchored" data-anchor-id="spliting-variables"><span class="header-section-number">17.6.3</span> Spliting Variables</h3>
<p>Before we begin, look at <code>data6</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>data6</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,000 × 4
   ID1       merge         X3    X4
   &lt;chr&gt;     &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt;
 1 Ad9131ee9 -1.23/2.64  2.12  3.56
 2 A9c5988ea 1.74/3.02   4.09  4.88
 3 A28a5479d 0.87/3.56   3.47  4.47
 4 Aaf5537cc 1.05/2.01   3.61  5.03
 5 A370958bd -1.47/1.26  3.98  6.59
 6 Aea997e13 1.66/3.51   1.65  2.72
 7 A3563646f 1.81/1.7    4.29  3.13
 8 A9b3cfdba 1.8/2.26    1.94  5.23
 9 A32b6737a 2.38/1.68   3.06  3.3 
10 A30e96748 1/2.17      2.59  3.03
# … with 990 more rows</code></pre>
</div>
</div>
<p>Notice how the <code>merge</code> variable has two values separated by “/”. If we need to split the variable into two variables, we need to specify the <code>separate()</code>. All you need to specify is the variable you need to split, the name of the 2 new variables, in a character vector, and how to split the variable <code>"/"</code>. Split the variable <code>merge</code> in <code>data6</code> to two new variables called <code>X1</code> and <code>X2</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>data6 <span class="sc">%&gt;%</span> <span class="fu">separate</span>(merge, <span class="fu">c</span>(<span class="st">"X1"</span>, <span class="st">"X2"</span>), <span class="st">"/"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,000 × 5
   ID1       X1    X2       X3    X4
   &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Ad9131ee9 -1.23 2.64   2.12  3.56
 2 A9c5988ea 1.74  3.02   4.09  4.88
 3 A28a5479d 0.87  3.56   3.47  4.47
 4 Aaf5537cc 1.05  2.01   3.61  5.03
 5 A370958bd -1.47 1.26   3.98  6.59
 6 Aea997e13 1.66  3.51   1.65  2.72
 7 A3563646f 1.81  1.7    4.29  3.13
 8 A9b3cfdba 1.8   2.26   1.94  5.23
 9 A32b6737a 2.38  1.68   3.06  3.3 
10 A30e96748 1     2.17   2.59  3.03
# … with 990 more rows</code></pre>
</div>
</div>
</section>
<section id="splitting-rows" class="level3" data-number="17.6.4">
<h3 data-number="17.6.4" class="anchored" data-anchor-id="splitting-rows"><span class="header-section-number">17.6.4</span> Splitting Rows</h3>
<p>The variable <code>merge</code> in <code>data6</code> was split into different variables before, now instead of variables, let’s split it into different rows instead. To do this, use the <code>separate_rows()</code>. All you need to specify the variable name and the <code>sep=</code> (must state the argument). Split the <code>merge</code> variable from <code>data6</code> into different rows.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>data6 <span class="sc">%&gt;%</span> <span class="fu">separate_rows</span>(merge, <span class="at">sep =</span> <span class="st">"/"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,000 × 4
   ID1       merge    X3    X4
   &lt;chr&gt;     &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Ad9131ee9 -1.23  2.12  3.56
 2 Ad9131ee9 2.64   2.12  3.56
 3 A9c5988ea 1.74   4.09  4.88
 4 A9c5988ea 3.02   4.09  4.88
 5 A28a5479d 0.87   3.47  4.47
 6 A28a5479d 3.56   3.47  4.47
 7 Aaf5537cc 1.05   3.61  5.03
 8 Aaf5537cc 2.01   3.61  5.03
 9 A370958bd -1.47  3.98  6.59
10 A370958bd 1.26   3.98  6.59
# … with 1,990 more rows</code></pre>
</div>
</div>
</section>
<section id="merging-rows" class="level3" data-number="17.6.5">
<h3 data-number="17.6.5" class="anchored" data-anchor-id="merging-rows"><span class="header-section-number">17.6.5</span> Merging Rows</h3>
<p>If you need to merge variables together, similar to the <code>merge</code> variable, use the <code>unite()</code>. All you need to do is specify the variables to merge, the <code>col=</code> which specifies the name of the new variable (as a character), and the <code>sep=</code> which indicates the symbol for separate value, as a character. Note, you need to specify the bot the <code>col=</code> and <code>sep=</code>. Merge variable <code>X3</code> and <code>X4</code> in <code>data6</code> to a new variable called <code>merge2</code> and have the separator be a hyphen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>data6 <span class="sc">%&gt;%</span> <span class="fu">unite</span>(X3, X4, <span class="at">col =</span> <span class="st">"merge2"</span>, <span class="at">sep=</span><span class="st">"-"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,000 × 3
   ID1       merge      merge2   
   &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;    
 1 Ad9131ee9 -1.23/2.64 2.12-3.56
 2 A9c5988ea 1.74/3.02  4.09-4.88
 3 A28a5479d 0.87/3.56  3.47-4.47
 4 Aaf5537cc 1.05/2.01  3.61-5.03
 5 A370958bd -1.47/1.26 3.98-6.59
 6 Aea997e13 1.66/3.51  1.65-2.72
 7 A3563646f 1.81/1.7   4.29-3.13
 8 A9b3cfdba 1.8/2.26   1.94-5.23
 9 A32b6737a 2.38/1.68  3.06-3.3 
10 A30e96748 1/2.17     2.59-3.03
# … with 990 more rows</code></pre>
</div>
</div>
</section>
</section>
<section id="applied-example" class="level2" data-number="17.7">
<h2 data-number="17.7" class="anchored" data-anchor-id="applied-example"><span class="header-section-number">17.7</span> Applied Example</h2>
<p>Here is an applied example where you will use what you learned from the previous lesson and convert <code>data7</code> into <code>data8</code>. <code>data7</code> has a wide data format which contains time points labeled as <code>vX</code>, where <code>X</code> represents the time point number. At each time point, the mean, sd, and median was taken. You will need to convert the data to long where each row represents a new time point, and each row will have 3 variables representing the mean, sd, and median. View both <code>data7</code> and <code>data8</code> to have a better idea on what is going on. Remember you need to convert <code>data7</code> to <code>data8</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>data7</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,000 × 13
   ID1       `v1/mean` `v1/sd` v1/med…¹ v2/me…² `v2/sd` v2/med…³ v3/me…⁴ `v3/sd`
   &lt;chr&gt;         &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 Ad9131ee9     3.11    2.86      4.50   1.93    3.21   3.27     2.65    -0.383
 2 A9c5988ea     2.03    2.90      2.08   0.709   2.27   4.13     1.45     2.01 
 3 A28a5479d    -0.415   2.42      2.47   2.38   -0.820  1.22     3.44     1.63 
 4 Aaf5537cc     1.25    2.24      3.71   4.00    0.456  4.32     1.54     0.789
 5 A370958bd    -0.984   0.972     3.73   2.19   -0.184  2.14     4.32    -0.804
 6 Aea997e13     1.42    1.34      2.35   2.77    4.16  -0.00874 -3.02     4.25 
 7 A3563646f    -0.149   3.26      4.49   5.07    2.44   3.85     0.0388   1.92 
 8 A9b3cfdba     0.270   1.57      3.25   2.89    0.422  5.01    -0.218    0.545
 9 A32b6737a     0.714   3.39      5.66   2.52    3.15   3.16    -0.784    1.39 
10 A30e96748     0.467   2.47      2.64   3.97    1.76   4.00     2.21     2.34 
# … with 990 more rows, 4 more variables: `v3/median` &lt;dbl&gt;, `v4/mean` &lt;dbl&gt;,
#   `v4/sd` &lt;dbl&gt;, `v4/median` &lt;dbl&gt;, and abbreviated variable names
#   ¹​`v1/median`, ²​`v2/mean`, ³​`v2/median`, ⁴​`v3/mean`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>data8</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4,000 × 5
   ID1       time    mean     sd  median
   &lt;chr&gt;     &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1 Ad9131ee9 v1     3.11   2.86   4.50  
 2 Ad9131ee9 v2     1.93   3.21   3.27  
 3 Ad9131ee9 v3     2.65  -0.383  3.23  
 4 Ad9131ee9 v4     0.605  0.883  4.65  
 5 A9c5988ea v1     2.03   2.90   2.08  
 6 A9c5988ea v2     0.709  2.27   4.13  
 7 A9c5988ea v3     1.45   2.01   2.84  
 8 A9c5988ea v4     0.710  3.03  -0.0898
 9 A28a5479d v1    -0.415  2.42   2.47  
10 A28a5479d v2     2.38  -0.820  1.22  
# … with 3,990 more rows</code></pre>
</div>
</div>
<p>Now that you viewed the data set, type the code to convert <code>data7</code> to <code>data8</code>. Try working it out before you look at the solution.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>data7 <span class="sc">%&gt;%</span> <span class="fu">pivot_longer</span>(<span class="st">`</span><span class="at">v1/mean</span><span class="st">`</span><span class="sc">:</span><span class="st">`</span><span class="at">v4/median</span><span class="st">`</span>,<span class="st">"measurement"</span>,<span class="st">"value"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>          <span class="fu">separate</span>(measurement,<span class="fu">c</span>(<span class="st">"time"</span>,<span class="st">"stat"</span>),<span class="at">sep=</span><span class="st">"/"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>          <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> stat,<span class="at">values_from =</span> value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4,000 × 5
   ID1       time    mean     sd  median
   &lt;chr&gt;     &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1 Ad9131ee9 v1     3.11   2.86   4.50  
 2 Ad9131ee9 v2     1.93   3.21   3.27  
 3 Ad9131ee9 v3     2.65  -0.383  3.23  
 4 Ad9131ee9 v4     0.605  0.883  4.65  
 5 A9c5988ea v1     2.03   2.90   2.08  
 6 A9c5988ea v2     0.709  2.27   4.13  
 7 A9c5988ea v3     1.45   2.01   2.84  
 8 A9c5988ea v4     0.710  3.03  -0.0898
 9 A28a5479d v1    -0.415  2.42   2.47  
10 A28a5479d v2     2.38  -0.820  1.22  
# … with 3,990 more rows</code></pre>
</div>
</div>


</section>
<aside id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>Linear Mixed-Effects Models.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</aside>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    const typesetMath = (el) => {
      if (window.MathJax) {
        // MathJax Typeset
        window.MathJax.typeset([el]);
      } else if (window.katex) {
        // KaTeX Render
        var mathElements = el.getElementsByClassName("math");
        var macros = [];
        for (var i = 0; i < mathElements.length; i++) {
          var texText = mathElements[i].firstChild;
          if (mathElements[i].tagName == "SPAN") {
            window.katex.render(texText.data, mathElements[i], {
              displayMode: mathElements[i].classList.contains('display'),
              throwOnError: false,
              macros: macros,
              fleqn: false
            });
          }
        }
      }
    }
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        typesetMath(container);
        return container.innerHTML
      } else {
        typesetMath(note);
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      typesetMath(note);
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./importing.html" class="pagination-link  aria-label=" &lt;span="" data&lt;="" span&gt;"="">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Importing Data</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./data_summary.html" class="pagination-link" aria-label="<span class='chapter-number'>18</span>&nbsp; <span class='chapter-title'>Data Summarization</span>">
        <span class="nav-page-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Data Summarization</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>