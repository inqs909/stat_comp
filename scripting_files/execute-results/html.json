{
  "hash": "d5abe9c756a4783dba2ad1c77db87f13",
  "result": {
    "markdown": "# Scripting and Piping in R\n\n## Commenting\n\nA comment is used to describe your code within the\n\n## Scripting\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(magrittr)\n```\n:::\n\n\n## Pipes\n\nIn R, pipes are used to transfer the output from one function to the input of another function. Piping will then allow you to chain functions to run an analysis. Since R 4.1.0, there are two version of pipes, the base R pipe and the pipes from the [magrittr](https://magrittr.tidyverse.org/) package. The table below provides a brief description of each type pipes\n\n| Pipe   | Name            | Package  | Description                                                                                                                                                                                     |\n|--------------|--------------|--------------|-------------------------------|\n| `|>`   | R Pipe          | Base     | This pipe will use the output of the previous function as the input for the first argument following function.                                                                                  |\n| `%>%`  | Forward Pipe    | magrittr | The forward pipe will use the output of the previous function as the input of the following function.                                                                                           |\n| `%$5`  | Exposition Pipe | magrittr | The exposition function will expose the named elements of an R object (or output) to the following function.                                                                                    |\n| `%T>%` | Tee Pipe        | magrittr | The Tee pipe will evaluate the next function using the output of the previous function, but it will not retain the output of the next function and utilize the output of the previous function. |\n| `%<>%` | Assignment Pipe | magrittr | The assignment pipe will rewrite the object that is being piped into the next function.                                                                                                         |\n\nWhen choosing between Base or magrittr's pipes, I recommend using magrittr's pipes due to the extended functionality. However, when writing production code or developing an R package, I recommend using the Base R pipe.\n\n### `|>`\n\nThe base pipe will use the output from the first function and use it as the input of the first argument in the second function. Below, we obtain the `mpg` variable from `mtcars` and pipe it in the `mean()` function.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmtcars$mpg |> mean()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 20.09062\n```\n:::\n:::\n\n\n### `%>%`\n\n#### Uses\n\nMagrittr's pipe is the equivalent of Base R's pipe, with some extra functionality. Below we repeat the same code as before:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmtcars$mpg %>% mean()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 20.09062\n```\n:::\n:::\n\n\nAlternatively, we do not have to type the parenthesis in the second function:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmtcars$mpg %>% mean\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 20.09062\n```\n:::\n:::\n\n\nBelow is another example where we will pipe the value `3` into the `rep()` with `times=5`, this will repeat the value `3` five times:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n3 %>% rep(5)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 3 3 3 3 3\n```\n:::\n:::\n\n\nIf we are interested in piping the output to another argument other than the first argument, we can use the (`.`) placeholder in the second function to indicate which argument should take the previous output. Below, we repeat the vector `c(1, 2)` three times because the `.` is in the second argument:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n3 %>% rep(c(1,2), .)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 1 2 1 2 1 2\n```\n:::\n:::\n\n\n#### Creating Unary Functions\n\nYou can use `%>%` and `.` to create unary functions, a function with one argument,\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlogsqrt <- . %>% log(base = 10) %>% sqrt\nlogsqrt(10000)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 2\n```\n:::\n\n```{.r .cell-code}\nsqrt(log10(10000))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 2\n```\n:::\n:::\n\n\n### `%$%`\n\nThe exposition pipe will expose the named elements of an object or output to the following function. For example, we will pipe the `mtcars` into the `lm()` function. However, we will use the `%$%` pipe to access the variables in the data frame for the formula argument.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmtcars %$% lm(mpg ~ hp)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nlm(formula = mpg ~ hp)\n\nCoefficients:\n(Intercept)           hp  \n   30.09886     -0.06823  \n```\n:::\n:::\n\n\n### `%T>%`\n\n\n::: {.cell}\n\n```{.r .cell-code}\nx_lm <- mtcars %$% lm(mpg ~ hp) %T>% \n  (\\(x) print(summary(x))) %T>% \n  (\\(x) print(sigma(x)))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nlm(formula = mpg ~ hp)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-5.7121 -2.1122 -0.8854  1.5819  8.2360 \n\nCoefficients:\n            Estimate Std. Error t value Pr(>|t|)    \n(Intercept) 30.09886    1.63392  18.421  < 2e-16 ***\nhp          -0.06823    0.01012  -6.742 1.79e-07 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 3.863 on 30 degrees of freedom\nMultiple R-squared:  0.6024,\tAdjusted R-squared:  0.5892 \nF-statistic: 45.46 on 1 and 30 DF,  p-value: 1.788e-07\n\n[1] 3.862962\n```\n:::\n:::\n\n\n## Keyboard Shortcuts\n\nBelow is a list of recommended keyboard shortcuts:\n\n| Shortcut          | Windows/Linux    | Mac             |\n|-------------------|------------------|-----------------|\n| `%>%`             | Ctrl+Shift+M     | Cmd+Shift+M     |\n| Run Current Line  | Ctrl+Enter       | Cmd+Return      |\n| Run Current Chunk | Ctrl+Shift+Enter | Cmd+Shift+Enter |\n| Knit Document     | Ctrl+Shift+K     | Cmd+Shift+K     |\n| Add Cursor Below  | Ctrl+Alt+Down    | Cmd+Alt+Down    |\n| Comment Line      | Ctrl+Shift+C     | Cmd+Shift+C     |\n\nI recommend modify these keyboard shortcuts in RStudio\n\n| Shortcut | Windows/Linux | Mac         |\n|----------|---------------|-------------|\n| `%in%`   | Ctrl+Shift+I  | Cmd+Shift+I |\n| `%$%`    | Ctrl+Shift+D  | Cmd+Shift+D |\n| `%T>%`   | Ctrl+Shift+T  | Cmd+Shift+T |\n\nNote you will need to install the `extraInserts` package:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nremotes::install_github('konradzdeb/extraInserts')\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}